!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return"function"==typeof t}function r(t){return null!=t&&"object"==typeof t}function n(){try{return b.apply(this,arguments)}catch(t){return E.errorObject.e=t,E.errorObject}}function o(t){return b=t,n}function i(t){return t.reduce(function(t,e){return t.concat(e instanceof k.UnsubscriptionError?e.errors:e)},[])}function s(t,e,r){if(t){if(t instanceof $.Subscriber)return t;if(t[V.rxSubscriber])return t[V.rxSubscriber]()}return t||e||r?new $.Subscriber(t,e,r):new $.Subscriber(R.empty)}function c(t){return t instanceof Date&&!isNaN(+t)}function u(t,e){void 0===e&&(e=gt.async);var r=jt.isDate(t),n=r?+t-e.now():Math.abs(t);return this.lift(new It(n,e))}function a(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}function h(t,e,r,n){var o=new Bt.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof H.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):e.subscribe(o);if(Vt.isArrayLike(e)){for(var i=0,s=e.length;i<s&&!o.closed;i++)o.next(e[i]);o.closed||o.complete()}else{if(Ft.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){v.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[qt.iterator])for(var c=e[qt.iterator]();;){var u=c.next();if(u.done){o.complete();break}if(o.next(u.value),o.closed)break}else if(e&&"function"==typeof e[J.observable]){var a=e[J.observable]();if("function"==typeof a.subscribe)return a.subscribe(new Bt.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h=O.isObject(e)?"an invalid object":"'"+e+"'",l="You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(l))}}return null}function l(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new Zt(t,e,r))}function p(t,e){return this.lift(new ne.MergeMapOperator(t,e,1))}function f(t){return t&&"function"==typeof t.schedule}var b,d=function(t,e){for(var r,n,o,i=arguments,s=[],c=[],u=arguments.length;u-- >2;)s.push(i[u]);for(;s.length;)if(Array.isArray(r=s.pop()))for(u=r.length;u--;)s.push(r[u]);else null!=r&&!0!==r&&!1!==r&&(u=c.length,"number"==typeof r&&(r+=""),n="string"==typeof r,n&&o?c[u-1]+=r:(c[u]=r,o=n));return"string"==typeof t?{tag:t,data:e||{},children:c}:t(e,c)},y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},v=t(function(t,e){if(e.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof y&&y.global===y&&y,!e.root)throw new Error("RxJS could not find any global context (window, self, global)")}),w=e,_={isFunction:w},m=Array.isArray||function(t){return t&&"number"==typeof t.length},x={isArray:m},S=r,O={isObject:S},g={e:{}},E={errorObject:g},j=o,N={tryCatch:j},P=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},A=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return P(e,t),e}(Error),T=A,k={UnsubscriptionError:T},I=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=this,r=!1;if(!this.closed){var n=this,o=n._parent,s=n._parents,c=n._unsubscribe,u=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,h=s?s.length:0;o;)o.remove(e),o=++a<h&&s[a]||null;if(_.isFunction(c)){var l=N.tryCatch(c).call(this);l===E.errorObject&&(r=!0,t=t||(E.errorObject.e instanceof k.UnsubscriptionError?i(E.errorObject.e.errors):[E.errorObject.e]))}if(x.isArray(u))for(a=-1,h=u.length;++a<h;){var p=u[a];if(O.isObject(p)){var l=N.tryCatch(p.unsubscribe).call(p);if(l===E.errorObject){r=!0,t=t||[];var f=E.errorObject.e;f instanceof k.UnsubscriptionError?t=t.concat(i(f.errors)):t.push(f)}}}if(r)throw new k.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}(),C=I,M={Subscription:C},U={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}},R={empty:U},V=t(function(t,e){var r=v.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),Y=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},F=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=R.empty;break;case 1:if(!r){this.destination=R.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new D(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new D(this,r,n,o)}}return Y(e,t),e.prototype[V.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(M.Subscription),q=F,D=function(t){function e(e,r,n,o){t.call(this),this._parentSubscriber=e;var i,s=this;_.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==R.empty&&(s=Object.create(r),_.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=o}return Y(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){if(!this.isStopped){var t=this._parentSubscriber;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(F),$={Subscriber:q},L=s,B={toSubscriber:L},J=t(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(v.root),e.$$observable=e.observable}),z=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=B.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(v.root.Rx&&v.root.Rx.config&&v.root.Rx.config.Promise?e=v.root.Rx.config.Promise:v.root.Promise&&(e=v.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[J.observable]=function(){return this},t.create=function(e){return new t(e)},t}(),G=z,H={Observable:G},K=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Q=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return K(e,t),e}(Error),W=Q,X={ObjectUnsubscribedError:W},Z=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},tt=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return Z(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(M.Subscription),et=tt,rt={SubjectSubscription:et},nt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ot=function(t){function e(e){t.call(this,e),this.destination=e}return nt(e,t),e}($.Subscriber),it=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return nt(e,t),e.prototype[V.rxSubscriber]=function(){return new ot(this)},e.prototype.lift=function(t){var e=new ct(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new X.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new X.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new X.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new X.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new X.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),M.Subscription.EMPTY):this.isStopped?(t.complete(),M.Subscription.EMPTY):(this.observers.push(t),new rt.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new H.Observable;return t.source=this,t},e.create=function(t,e){return new ct(t,e)},e}(H.Observable),st=it,ct=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return nt(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):M.Subscription.EMPTY},e}(it),ut=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},at=function(t){function e(e,r){t.call(this)}return ut(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(M.Subscription),ht=at,lt={Action:ht},pt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ft=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return pt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),v.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r?e:v.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null))},e}(lt.Action),bt=ft,dt={AsyncAction:bt},yt=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),vt=yt,wt={Scheduler:vt},_t=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},mt=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return _t(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}},e}(wt.Scheduler),xt=mt,St={AsyncScheduler:xt},Ot=new St.AsyncScheduler(dt.AsyncAction),gt={async:Ot},Et=c,jt={isDate:Et},Nt=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return H.Observable.of(this.value);case"E":return H.Observable.throw(this.error);case"C":return H.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):this.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return this.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Pt=Nt,At={Notification:Pt},Tt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},kt=u,It=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ct(t,this.delay,this.scheduler))},t}(),Ct=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return Tt(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new Mt(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(At.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(At.Notification.createComplete())},e}($.Subscriber),Mt=function(){function t(t,e){this.time=t,this.notification=e}return t}(),Ut={delay:kt};H.Observable.prototype.delay=Ut.delay;var Rt=function(t){return t&&"number"==typeof t.length},Vt={isArrayLike:Rt},Yt=a,Ft={isPromise:Yt},qt=t(function(t,e){function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=r,e.iterator=r(v.root),e.$$iterator=e.iterator}),Dt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},$t=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return Dt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}($.Subscriber),Lt=$t,Bt={InnerSubscriber:Lt},Jt=h,zt={subscribeToResult:Jt},Gt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Ht=function(t){function e(){t.apply(this,arguments)}return Gt(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}($.Subscriber),Kt=Ht,Qt={OuterSubscriber:Kt},Wt=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Xt=l,Zt=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new ee(t,this.project,this.resultSelector,this.concurrent))},t}(),te=Zt,ee=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Wt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(zt.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Qt.OuterSubscriber),re=ee,ne={mergeMap:Xt,MergeMapOperator:te,MergeMapSubscriber:re},oe=p,ie={concatMap:oe};H.Observable.prototype.concatMap=ie.concatMap;var se=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ce=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return se(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;if(e)return void n.complete();n.next(r),n.closed||(t.done=!0,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(H.Observable),ue=ce,ae={ScalarObservable:ue},he=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},le=function(t){function e(e){t.call(this),this.scheduler=e}return he(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(H.Observable),pe=le,fe={EmptyObservable:pe},be=f,de={isScheduler:be},ye=y&&y.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ve=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return ye(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n-0]=t[n];var o=r[r.length-1];de.isScheduler(o)?r.pop():o=null;var i=r.length;return i>1?new e(r,o):1===i?new ae.ScalarObservable(r[0],o):new fe.EmptyObservable(o)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;if(r>=n)return void o.complete();o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}(H.Observable),we=ve,_e={ArrayObservable:we},me=_e.ArrayObservable.of,xe={of:me};H.Observable.of=xe.of;var Se=function(t){return G.of(t).delay(600)},Oe=(new st).concatMap(Se),ge=window.performance.now();Oe.subscribe(function(t){var e=window.performance.now()-ge;console.log("executing at "+e.toFixed(2)+" ms"),t()});var Ee={add:function(t){return{count:++t.count}},scheduleAdd:function(t,e,r){Oe.next(r.add)},scheduleSub:function(t,e,r){Oe.next(r.sub)},sub:function(t){return{count:--t.count}}},je={count:0},Ne=function(){return d("header",null,d("h2",null,"hyperapp RxJS "),d("p",null,d("small",null,d("em",null,"click away, clicks will be captured and actions will be queued up, then executed with minimum 600ms between each")," ",d("a",{href:"https://github.com/marcusasplund/hyperapp-RxJS"},"source"))),d("hr",null))},Pe=function(t){var e=t.actions;return d("button",{class:"button",onclick:e.scheduleAdd},"add one +")},Ae=function(t){var e=t.actions;return d("button",{class:"button",onclick:e.scheduleSub},"subtract one -")},Te=function(){return d("fieldset",{id:"console-log-div"},ke.map(function(t,e){return Ve(t,e)}))},ke=[],Ie=console.log,Ce=console.error,Me=console.warn,Ue=0,Re=function(t,e){for(var r=Array.prototype.slice.call(t),n=0;n<r.length;n++)ke.unshift({message:r[n],type:e,index:++Ue})};console.log=function(){Ie.apply(console,arguments),Re(arguments,"log")},console.error=function(){Ce.apply(console,arguments),Re(arguments,"error")},console.warn=function(){Me.apply(console,arguments),Re(arguments,"warn")};var Ve=function(t,e){return d("div",{class:t.type},t.index+". ",t.message)},Ye=function(t,e){return d("div",{class:"container"},d(Ne,null),d("h1",null,t.count),d(Pe,{actions:e}),d(Ae,{actions:e}),d(Te,null))};!function(t){function e(t,r,s){Object.keys(r||[]).map(function(c){var u=r[c],a=s?s+"."+c:c;"function"==typeof u?t[c]=function(t){var e=u(b,n("action",{name:a,data:t}).data,y,n);if(null==e||"function"==typeof e.then)return e;o(b=i(b,n("update",e)),d)}:e(t[c]||(t[c]={}),u,a)})}function r(){o(b,d),n("loaded",n)}function n(t,e){return(v[t]||[]).map(function(t){var r=t(b,y,e,n);null!=r&&(e=r)}),e}function o(e,r){f=l(t.root||(t.root=document.body),f,p,p=n("render",r)(e,y))}function i(t,e){var r={};if("object"!=typeof e||Array.isArray(e))return e;for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}function s(t,e){if("string"==typeof t)var r=document.createTextNode(t);else{for(var r=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),n=0;n<t.children.length;)r.appendChild(s(t.children[n++],e));for(var o in t.data)"onCreate"===o?t.data[o](r):c(r,o,t.data[o])}return r}function c(t,e,r,n){if("key"===e);else if("style"===(e=e.toLowerCase()))for(var o in i(n,r=r||{}))t.style[o]=r[o]||"";else{try{t[e]=r}catch(t){}"function"!=typeof r&&(r?t.setAttribute(e,r):t.removeAttribute(e))}}function u(t,e,r){for(var n in i(e,r)){var o=r[n],s=e[n];"onUpdate"===n?o(t):o===s&&o===t[n]||c(t,n,o,s)}}function a(t){if(t&&(t=t.data))return t.key}function h(t,e,r){r.data.onRemove&&r.data.onRemove(e),t.removeChild(e)}function l(t,e,r,n){if(null==r)e=t.insertBefore(s(n),e);else if(n.tag&&n.tag===r.tag){u(e,r.data,n.data);for(var o=n.children.length,i=r.children.length,c={},p=[],f={},b=0;b<i;b++){var d=e.childNodes[b];p[b]=d;var y=r.children[b],v=a(y);null!=v&&(c[v]=[d,y])}for(var b=0,w=0;w<o;){var d=p[b],y=r.children[b],_=n.children[w],v=a(y);if(f[v])b++;else{var m=a(_),x=c[m],S=0,O=0;x&&(S=x[0],O=x[1]),null==v&&null==m?(l(e,d,y,_),w++,b++):null==v&&null!=m?(S?(e.insertBefore(S,d),l(e,S,O,_)):l(e,d,null,_),w++,f[m]=_):null!=v&&null==m?b++:(v===m?(l(e,S,O,_),b++):S?(e.insertBefore(S,d),l(e,S,O,_)):l(e,d,null,_),w++,f[m]=_)}}for(;b<i;){var y=r.children[b],v=a(y);null==v&&h(e,p[b],y),b++}for(var b in c){var x=c[b],O=x[1];f[O.data.key]||h(e,x[0],O)}}else if(n!==r){var b=e;t.replaceChild(e=s(n),b)}return e}for(var p,f,b={},d=t.view,y={},v={},w=-1,_=t.plugins||[];w<_.length;w++){var m=_[w]?_[w](t):t;null!=m.state&&(b=i(b,m.state)),e(y,m.actions),Object.keys(m.events||[]).map(function(t){v[t]=(v[t]||[]).concat(m.events[t])})}"l"!==document.readyState[0]?r():addEventListener("DOMContentLoaded",r)}({actions:Ee,state:je,view:Ye})}();