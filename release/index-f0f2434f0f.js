!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return"function"==typeof t}function r(t){return null!=t&&"object"==typeof t}function n(){try{return S.apply(this,arguments)}catch(t){return A.errorObject.e=t,A.errorObject}}function o(t){return S=t,n}function i(t){return t.reduce(function(t,e){return t.concat(e instanceof V.UnsubscriptionError?e.errors:e)},[])}function s(t,e,r){if(t){if(t instanceof B.Subscriber)return t;if(t[$.rxSubscriber])return t[$.rxSubscriber]()}return t||e||r?new B.Subscriber(t,e,r):new B.Subscriber(D.empty)}function c(t){return t instanceof Date&&!isNaN(+t)}function u(t,e){void 0===e&&(e=Pt.async);var r=Tt.isDate(t),n=r?+t-e.now():Math.abs(t);return this.lift(new Rt(n,e))}function a(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}function h(t,e,r,n){var o=new Ht.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof Z.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):e.subscribe(o);if($t.isArrayLike(e)){for(var i=0,s=e.length;i<s&&!o.closed;i++)o.next(e[i]);o.closed||o.complete()}else{if(Wt.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){x.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[Jt.iterator])for(var c=e[Jt.iterator]();;){var u=c.next();if(u.done){o.complete();break}if(o.next(u.value),o.closed)break}else if(e&&"function"==typeof e[K.observable]){var a=e[K.observable]();if("function"==typeof a.subscribe)return a.subscribe(new Ht.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h=N.isObject(e)?"an invalid object":"'"+e+"'",l="You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(l))}}return null}function l(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new oe(t,e,r))}function p(t,e){return this.lift(new ue.MergeMapOperator(t,e,1))}function f(t){return t&&"function"==typeof t.schedule}var b=function(t,e){for(var r,n=arguments,o=[],i=[],s=arguments.length;s-- >2;)o[o.length]=n[s];for(;o.length;)if(Array.isArray(r=o.pop()))for(var s=r.length;s--;)o[o.length]=r[s];else null!=r&&!0!==r&&!1!==r&&("number"==typeof r&&(r+=""),i[i.length]=r);return"string"==typeof t?{tag:t,data:e||{},children:i}:t(e,i)},d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y="undefined"!=typeof window&&window,v="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,w=void 0!==d&&d,_=y||w||v,m=_;!function(){if(!_)throw new Error("RxJS could not find any global context (window, self, global)")}();var S,x={root:m},O=e,g={isFunction:O},E=Array.isArray||function(t){return t&&"number"==typeof t.length},j={isArray:E},k=r,N={isObject:k},P={e:{}},A={errorObject:P},T=o,I={tryCatch:T},M=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},C=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return M(e,t),e}(Error),U=C,V={UnsubscriptionError:U},R=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=this,r=!1;if(!this.closed){var n=this,o=n._parent,s=n._parents,c=n._unsubscribe,u=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,h=s?s.length:0;o;)o.remove(e),o=++a<h&&s[a]||null;if(g.isFunction(c)){var l=I.tryCatch(c).call(this);l===A.errorObject&&(r=!0,t=t||(A.errorObject.e instanceof V.UnsubscriptionError?i(A.errorObject.e.errors):[A.errorObject.e]))}if(j.isArray(u))for(a=-1,h=u.length;++a<h;){var p=u[a];if(N.isObject(p)){var l=I.tryCatch(p.unsubscribe).call(p);if(l===A.errorObject){r=!0,t=t||[];var f=A.errorObject.e;f instanceof V.UnsubscriptionError?t=t.concat(i(f.errors)):t.push(f)}}}if(r)throw new V.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}(),Y=R,F={Subscription:Y},q={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}},D={empty:q},$=t(function(t,e){var r=x.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),L=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},W=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=D.empty;break;case 1:if(!r){this.destination=D.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new z(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new z(this,r,n,o)}}return L(e,t),e.prototype[$.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(F.Subscription),J=W,z=function(t){function e(e,r,n,o){t.call(this),this._parentSubscriber=e;var i,s=this;g.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==D.empty&&(s=Object.create(r),g.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=o}return L(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(W),B={Subscriber:J},G=s,H={toSubscriber:G},K=t(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(x.root),e.$$observable=e.observable}),Q=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=H.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(x.root.Rx&&x.root.Rx.config&&x.root.Rx.config.Promise?e=x.root.Rx.config.Promise:x.root.Promise&&(e=x.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[K.observable]=function(){return this},t.create=function(e){return new t(e)},t}(),X=Q,Z={Observable:X},tt=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},et=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return tt(e,t),e}(Error),rt=et,nt={ObjectUnsubscribedError:rt},ot=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},it=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return ot(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(F.Subscription),st=it,ct={SubjectSubscription:st},ut=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},at=function(t){function e(e){t.call(this,e),this.destination=e}return ut(e,t),e}(B.Subscriber),ht=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return ut(e,t),e.prototype[$.rxSubscriber]=function(){return new at(this)},e.prototype.lift=function(t){var e=new pt(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new nt.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new nt.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new nt.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new nt.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new nt.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),F.Subscription.EMPTY):this.isStopped?(t.complete(),F.Subscription.EMPTY):(this.observers.push(t),new ct.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new Z.Observable;return t.source=this,t},e.create=function(t,e){return new pt(t,e)},e}(Z.Observable),lt=ht,pt=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return ut(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):F.Subscription.EMPTY},e}(ht),ft=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},bt=function(t){function e(e,r){t.call(this)}return ft(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(F.Subscription),dt=bt,yt={Action:dt},vt=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},wt=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return vt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),x.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?e:x.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null))},e}(yt.Action),_t=wt,mt={AsyncAction:_t},St=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),xt=St,Ot={Scheduler:xt},gt=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Et=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return gt(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}},e}(Ot.Scheduler),jt=Et,kt={AsyncScheduler:jt},Nt=new kt.AsyncScheduler(mt.AsyncAction),Pt={async:Nt},At=c,Tt={isDate:At},It=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Z.Observable.of(this.value);case"E":return Z.Observable.throw(this.error);case"C":return Z.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):this.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return this.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Mt=It,Ct={Notification:Mt},Ut=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Vt=u,Rt=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.delay,this.scheduler))},t}(),Yt=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return Ut(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new Ft(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(Ct.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(Ct.Notification.createComplete())},e}(B.Subscriber),Ft=function(){function t(t,e){this.time=t,this.notification=e}return t}(),qt={delay:Vt};Z.Observable.prototype.delay=qt.delay;var Dt=function(t){return t&&"number"==typeof t.length},$t={isArrayLike:Dt},Lt=a,Wt={isPromise:Lt},Jt=t(function(t,e){function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=r,e.iterator=r(x.root),e.$$iterator=e.iterator}),zt=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Bt=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return zt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(B.Subscriber),Gt=Bt,Ht={InnerSubscriber:Gt},Kt=h,Qt={subscribeToResult:Kt},Xt=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Zt=function(t){function e(){t.apply(this,arguments)}return Xt(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(B.Subscriber),te=Zt,ee={OuterSubscriber:te},re=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ne=l,oe=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new se(t,this.project,this.resultSelector,this.concurrent))},t}(),ie=oe,se=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return re(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(Qt.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(ee.OuterSubscriber),ce=se,ue={mergeMap:ne,MergeMapOperator:ie,MergeMapSubscriber:ce},ae=p,he={concatMap:ae};Z.Observable.prototype.concatMap=he.concatMap;var le=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},pe=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return le(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;if(e)return void n.complete();n.next(r),n.closed||(t.done=!0,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(Z.Observable),fe=pe,be={ScalarObservable:fe},de=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ye=function(t){function e(e){t.call(this),this.scheduler=e}return de(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(Z.Observable),ve=ye,we={EmptyObservable:ve},_e=f,me={isScheduler:_e},Se=d&&d.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},xe=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Se(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n-0]=t[n];var o=r[r.length-1];me.isScheduler(o)?r.pop():o=null;var i=r.length;return i>1?new e(r,o):1===i?new be.ScalarObservable(r[0],o):new we.EmptyObservable(o)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;if(r>=n)return void o.complete();o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}(Z.Observable),Oe=xe,ge={ArrayObservable:Oe},Ee=ge.ArrayObservable.of,je={of:Ee};Z.Observable.of=je.of;var ke=function(t){return X.of(t).delay(600)},Ne=(new lt).concatMap(ke),Pe=window.performance.now();Ne.subscribe(function(t){var e=window.performance.now()-Pe;console.log("executing at "+e.toFixed(2)+" ms"),t()});var Ae={add:function(t,e,r){return{count:++t.count}},scheduleAdd:function(t,e,r){Ne.next(e.add)},scheduleSub:function(t,e,r){Ne.next(e.sub)},sub:function(t,e,r){return{count:--t.count}}},Te={count:0},Ie=function(){return b("header",null,b("h2",null,"hyperapp RxJS "),b("p",null,b("small",null,b("em",null,"click away, clicks will be captured and actions will be queued up, then executed with minimum 600ms between each")," ",b("a",{href:"https://github.com/marcusasplund/hyperapp-RxJS"},"source"))),b("hr",null))},Me=function(t){var e=t.actions;return b("button",{class:"button",onclick:e.scheduleAdd},"add one +")},Ce=function(t){var e=t.actions;return b("button",{class:"button",onclick:e.scheduleSub},"subtract one -")},Ue=function(){return b("fieldset",{id:"console-log-div"},Ve.map(function(t,e){return $e(t,e)}))},Ve=[],Re=console.log,Ye=console.error,Fe=console.warn,qe=0,De=function(t,e){for(var r=Array.prototype.slice.call(t),n=0;n<r.length;n++)Ve.unshift({message:r[n],type:e,index:++qe})};console.log=function(){Re.apply(console,arguments),De(arguments,"log")},console.error=function(){Ye.apply(console,arguments),De(arguments,"error")},console.warn=function(){Fe.apply(console,arguments),De(arguments,"warn")};var $e=function(t,e){return b("div",{class:t.type},t.index+". ",t.message)},Le=function(t,e){return b("div",{class:"container"},b(Ie,null),b("h1",null,t.count),b(Me,{actions:e}),b(Ce,{actions:e}),b(Ue,null))};"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker.js").then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){switch(e.state){case"installed":navigator.serviceWorker.controller?console.log("New or updated content is available."):console.log("Content is now available offline!");break;case"redundant":console.error("The installing service worker became redundant.")}}}}).catch(function(t){console.error("Error during service worker registration:",t)})}),function(t){function e(t,r,s){Object.keys(r||[]).map(function(c){var u=r[c],a=s?s+"."+c:c;"function"==typeof u?t[c]=function(t){var e=u(b,y,n("action",{name:a,data:t}).data,n);if(null==e||"function"==typeof e.then)return e;o(b=i(b,n("update",e)),d)}:e(t[c]||(t[c]={}),u,a)})}function r(){o(b,d),n("loaded")}function n(t,e){return(v[t]||[]).map(function(t){var r=t(b,y,e,n);null!=r&&(e=r)}),e}function o(e,r){f=l(t.root||(t.root=document.body),f,p,p=n("render",r)(e,y))}function i(t,e){var r={};if("object"!=typeof e||Array.isArray(e))return e;for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}function s(t,e){if("string"==typeof t)var r=document.createTextNode(t);else{for(var r=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),n=0;n<t.children.length;)r.appendChild(s(t.children[n++],e));for(var n in t.data)"oncreate"===n?t.data[n](r):c(r,n,t.data[n])}return r}function c(t,e,r,n){if("key"===e);else if("style"===e)for(var o in i(n,r=r||{}))t.style[o]=r[o]||"";else{try{t[e]=r}catch(t){}"function"!=typeof r&&(r?t.setAttribute(e,r):t.removeAttribute(e))}}function u(t,e,r){for(var n in i(e,r)){var o=r[n],s="value"===n||"checked"===n?t[n]:e[n];"onupdate"===n&&o?o(t):o!==s&&c(t,n,o,s)}}function a(t){if(t&&(t=t.data))return t.key}function h(t,e,r){function n(){t.removeChild(e)}(r.data&&r.data.onremove||n)(e,n)}function l(t,e,r,n){if(null==r)e=t.insertBefore(s(n),e);else if(n.tag&&n.tag===r.tag){u(e,r.data,n.data);for(var o=n.children.length,i=r.children.length,c={},p=[],f={},b=0;b<i;b++){var d=e.childNodes[b];p[b]=d;var y=r.children[b],v=a(y);null!=v&&(c[v]=[d,y])}for(var b=0,w=0;w<o;){var d=p[b],y=r.children[b],_=n.children[w],v=a(y);if(f[v])b++;else{var m=a(_),S=c[m]||[];null==m?(null==v&&(l(e,d,y,_),w++),b++):(v===m?(l(e,S[0],S[1],_),b++):S[0]?(e.insertBefore(S[0],d),l(e,S[0],S[1],_)):l(e,d,null,_),w++,f[m]=_)}}for(;b<i;){var y=r.children[b],v=a(y);null==v&&h(e,p[b],y),b++}for(var b in c){var S=c[b],x=S[1];f[x.data.key]||h(e,S[0],x)}}else if(n!==r){var b=e;t.replaceChild(e=s(n),b)}return e}for(var p,f,b={},d=t.view,y={},v={},w=-1,_=t.plugins||[];w<_.length;w++){var m=_[w]?_[w](t):t;null!=m.state&&(b=i(b,m.state)),e(y,m.actions),Object.keys(m.events||[]).map(function(t){v[t]=(v[t]||[]).concat(m.events[t])})}"l"!==document.readyState[0]?r():addEventListener("DOMContentLoaded",r)}({actions:Ae,state:Te,view:Le})}();